<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Purple Portals â€” Home</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0; font-family: 'Orbitron', sans-serif; background: black; color: white;
    display: flex; align-items: center; justify-content: center; height: 100vh;
    background-size: cover; background-position: center; overflow: hidden;
  }
  #search-container {
    background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; text-align: center;
    position: relative; min-width: 250px; cursor: move;
  }
  #search-box {
    width: 100%; padding: 8px; font-size: 16px; border: none; border-radius: 5px;
  }
  #controls { margin-top: 10px; display: flex; align-items: center; justify-content: space-between; }
  #volume-container { display: flex; align-items: center; gap: 5px; }
  #status-dot {
    width: 12px; height: 12px; border-radius: 50%; display: inline-block;
    background: red; margin-left: 5px;
  }
  #music-toggle { cursor: pointer; font-size: 18px; }
  input[type=range] {
    -webkit-appearance: none; height: 4px; background: #888; border-radius: 2px;
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 12px; height: 12px; background: white; border-radius: 50%;
  }
</style>
</head>
<body>
<div id="search-container">
  <input id="search-box" placeholder="Search..." autofocus>
  <div id="controls">
    <div id="volume-container">
      <span id="music-toggle">ðŸ”Š</span>
      <input id="volume-slider" type="range" min="0" max="100" value="50">
    </div>
    <span id="status-dot"></span>
  </div>
</div>
<audio id="bg-music" loop></audio>

<script>
const searchBox = document.getElementById("search-box"),
      music = document.getElementById("bg-music"),
      volSlider = document.getElementById("volume-slider"),
      toggle = document.getElementById("music-toggle"),
      statusDot = document.getElementById("status-dot"),
      container = document.getElementById("search-container");

let musicLoaded = false, bgLoaded = false;

// Background
const bg = new Image();
bg.src = "background.jpg";
bg.onload = () => { document.body.style.backgroundImage = `url(${bg.src})`; bgLoaded = true; updateStatus(); };

// Music
music.src = "music.mp3";
music.oncanplaythrough = () => { musicLoaded = true; updateStatus(); };

function updateStatus() {
  statusDot.style.background = musicLoaded && bgLoaded ? "purple" :
                               musicLoaded || bgLoaded ? "blue" : "red";
  document.querySelector("link[rel='icon']")?.remove();
  const icon = document.createElement("link");
  icon.rel = "icon";
  icon.href = musicLoaded && bgLoaded ? "purple.ico" :
              musicLoaded || bgLoaded ? "blue.ico" : "red.ico";
  document.head.appendChild(icon);
}

toggle.onclick = () => {
  if (music.paused) music.play(); else music.pause();
  toggle.textContent = music.paused ? "ðŸ”‡" : "ðŸ”Š";
};
volSlider.oninput = e => { music.volume = e.target.value / 100; };

// Search
searchBox.addEventListener("keydown", e => {
  if (e.key === "Enter" && searchBox.value.trim()) {
    window.open(`https://www.google.com/search?q=${encodeURIComponent(searchBox.value)}`);
  }
});

// Dragging
let offsetX, offsetY, dragging = false;
container.onmousedown = e => { dragging = true; offsetX = e.clientX - container.offsetLeft; offsetY = e.clientY - container.offsetTop; };
document.onmouseup = () => dragging = false;
document.onmousemove = e => { if (dragging) { container.style.left = e.clientX - offsetX + "px"; container.style.top = e.clientY - offsetY + "px"; container.style.position = "absolute"; } };
</script>
</body>
</html>
